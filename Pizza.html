<!DOCTYPE html>
<html lang="en">
	<head >
	  <title>Pizza Order</title>
	  <meta charset="utf-8">
	  <meta name="viewport" content="width=device-width, initial-scale=1">
	  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	  <script>
		var pizza;
		var pizzaCheckCount;
		function loadPizzas(){
			document.body.style.backgroundImage='none';

			var xmlhttp = new XMLHttpRequest();
			
			xmlhttp.open("GET", "https://raw.githubusercontent.com/kapil959/Pizza/master/pizzas.json", true);
			
			xmlhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					
					var myObj = JSON.parse(this.responseText);
					
					console.log(myObj.pizza);
					document.getElementById("startBtn").style.display = "none";
					pizzaCheckCount = new Array(myObj.pizza.length);
					for(i=0;i<myObj.pizza.length;i++){

						document.getElementById('pizzasList').innerHTML +=
						"<span id='pizza_"+(i+1)+"'><br>"+
						myObj.pizza[i].name+"<br>"+
						"{"+myObj.pizza[i].ingredients+"}"+"<br>"+
						"<img class='image' src="+myObj.pizza[i].image+" style=\"padding-right:5em\">"+
						"Rs. "+myObj.pizza[i].price+
						"<span class=\"glyphicon glyphicon-plus\" id='plus' onclick='addMinus(\"p\","+(i+1)+")' style=\"padding-left:5em\"></span>"+
						"<input type='textbox' id='count_"+(i+1)+"' class='textbox' value=0></input>"+
						"<span class=\"glyphicon glyphicon-minus\" id='plus' onclick='addMinus(\"m\","+(i+1)+")'></span>"
						+"<br><br></span>";
						pizzaCheckCount[i] = 0;
					}
					document.getElementById('pizzasList').innerHTML += "<br><a class='btn btn-info' style='display:none;' role='button' id='checkout' onclick='checkoutPizza()'>Checkout</a>";
					pizza = myObj.pizza;
				}
			};
			xmlhttp.send();
		}
		function addMinus(action, c) {
			var count = parseInt(document.getElementById('count_'+c).value);
			if(action == 'p') {
				count++;
			} else if(count != 0) {
				count--;
			}
			document.getElementById('count_'+c).value = count;
			pizzaCheckCount[c-1] = count;
			if(count>0) {
				document.getElementById("checkout").style.display='block';
			}else{
				var flag = 0;
				for(var i=0; i<pizzaCheckCount.length; i++) {
					if(pizzaCheckCount[i] >0) {
						flag = 1;
					}
				}
				if(flag == 0) {
					document.getElementById("checkout").style.display='none';
				}
				
			}
		}
		function checkoutPizza() {
			var orderCount = 0;
			var totalOrderAmount = 0;
			for(var i=0; i<pizza.length; i++) {
				if(pizzaCheckCount[i]>0) {
					orderCount+= pizzaCheckCount[i];
					totalOrderAmount += pizza[i].price*pizzaCheckCount[i]
					document.getElementById('confirmOrder').innerHTML +=
					"<span>"+pizza[i].name+pizza[i].price+' X '+pizzaCheckCount[i]+"</span><br><br>";
				}
			}
			document.getElementById('confirmOrder').innerHTML += "<span>Total Amount = " + totalOrderAmount + "</span>"+
				"<br><a class='btn btn-success' role='button' id='success' onclick='userInfo()'>Checkout</a>";
					document.getElementById("checkout").style.display='none';
		}
	  </script>
	</head>


	<body background="https://raw.githubusercontent.com/kapil959/Pizza/master/pizza1.jpeg" style="background-color:saddlebrown";>

		<div class="jumbotron text-center newJumbo" >
		  <h1>Welcome To Pizza Home</h1>
		</div>
		  
		<div class="container">
			<div class="col-xs-2">
				
			<div id="startBtn" class="orderCircle" value="Order Here" onclick="loadPizzas();">Click here to Order</div>
			</div>
			<div class="col-xs-6" id="pizzasList" style="color:white!important;font-weight:bold;font-size:16px;";>
			</div>
			
			<div class="col-xs-4" id="confirmOrder" style="color:white!important;font-weight:bold;font-size:16px;";>
				
			</div>
		</div>


<style>
.textbox{
color: black;
width:25px;
}
.image{
height:90px;
}
.orderCircle {
  border-radius: 50%;
  width: 160px;
  height: 130px;
  padding: 8px;
  background: yellow;
  border: 2px solid #666;
  color: #666;
  text-align: center;
  cursor:pointer;
  margin-left: -60px;
  font: 32px Arial, sans-serif;
}
.newJumbo{
padding-bottom:0px !important;
background-color:orange !important;
border: 1px solid orange;
opacity: 0.6;
filter: alpha(opacity=60);
}
</style>
	</body>
</html>
